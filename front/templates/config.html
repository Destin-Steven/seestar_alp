{% extends 'base.html' %}

{% block header %}
	<div class="container mt-3">
		<p class="h1">SSC Config</p>
	</div>
{% endblock %}

{% block content %}
	<div class="container mt-3">
		<p>The following settings represent the settings in config.toml - NOTE that some settings only take effect upon restarting SSC</p>
	</div>

	<div class="card border-primary mb-3">
		<form method="post" action="/config" class="bordered-form">
		<div class="card-body border">
			<h5 class="card-title">Networking</h5>
			<label for="ip_address" class="form-label">IP address:</label>
			<input id="ip_address" name="ip_address" type="text" value="{{ config.ip_address }}"><br>
			<label for="port" class="form-label">Port:</label>
			<input id="port" name="port" type="text" value="{{ config.port }}"><br>
			<label for="imgport" class="form-label">IMG port:</label>
			<input id="imgport" name="imgport" type="text" value="{{ config.imgport }}"><br>
			<label for="stport" class="form-label">ST port:</label>
			<input id="stport" name="stport" type="text" value="{{ config.stport }}"><br>
			<label for="sthost" class="form-label">ST host:</label>
			<input id="sthost" name="sthost" type="text" value="{{ config.sthost }}"><br>
			<label for="timeout" class="form-label">Timeout:</label>
			<input id="timeout" name="timeout" type="text" value="{{ config.timeout }}"><br>
			<label for="rtsp_udp" class="form-label">RTSP UDP:</label>
			{% if config.rtsp_udp == true %}
			<input id="rtsp_udp" name="rtsp_udp" type="checkbox" checked>
			{% else %}
			<input id="rtsp_udp" name="rtsp_udp" type="checkbox">
			{% endif %}
		</div>

		<div class="card-body border">
			<h5 class="card-title">Web UI</h5>
			<label for="uiport" class="form-label">UI port:</label>
			<input id="uiport" name="uiport" type="text" value="{{ config.uiport }}"><br>

			<label for="uitheme" class="form-label">UI theme:</label>
			<select id="uitheme" name="uitheme">
				{% if config.uitheme == "dark" %}
				<option value="dark" selected>dark</option>
				{% else %}
				<option value="dark">dark</option>
				{% endif %}
				{% if config.uitheme == "light" %}
				<option value="light" selected>light</option>
				{% else %}
				<option value="light">light</option>
				{% endif %}
			</select><br>
			<label for="twilighttimes" class="form-label">Twilight times</label>
			{% if config.twilighttimes == true %}
			<input id="twilighttimes" name="twilighttimes" type="checkbox" checked><br>
			{% else %}
			<input id="twilighttimes" name="twilighttimes" type="checkbox"><br>
			{% endif %}
			<label for="experimental" class="form-label">Experimental</label>
			{% if config.experimental == true %}
			<input id="experimental" name="experimental" type="checkbox" checked><br>
			{% else %}
			<input id="experimental" name="experimental" type="checkbox"><br>
			{% endif %}
			<label for="confirm" class="form-label">Commands Confirmation Dialog</label>
			{% if config.confirm == true %}
			<input id="confirm" name="confirm" type="checkbox" checked><br>
			{% else %}
			<input id="confirm" name="confirm" type="checkbox"><br>
			{% endif %}

			<label for="clear_sky_img_src" class="form-label">ClearSky img source:</label>
			<input id="clear_sky_img_src" name="clear_sky_img_src" type="text" size=80 value="{{ config.clear_sky_img_src }}"><br>
			<label for="clear_sky_href" class="form-label">ClearSky href:</label>
			<input id="clear_sky_href" name="clear_sky_href" type="text" size=80 value="{{ config.clear_sky_href }}"><br>
		</div>

		<div class="card-body border">
			<h5 class="card-title">Server</h5>
			<label for="location" class="form-label">Location:</label>
			<input id="location" name="location" type="text" value="{{ config.location }}"><br>
			<label for="verbose_driver_exceptions" class="form-label">Verbose driver exceptions:</label>
			{% if config.verbose_driver_exceptions == true %}
			<input id="verbose_driver_exceptions" name="verbose_driver_exceptions" type="checkbox" checked>
			{% else %}
			<input id="verbose_driver_exceptions" name="verbose_driver_exceptions" type="checkbox">
			{% endif %}
		</div>

		<div class="card-body border">
			<h5 class="card-title">Device</h5>
			<label for="can_reverse" class="form-label">Can reverse:</label>
			{% if config.can_reverse == true %}
			<input id="can_reverse" name="can_reverse" type="checkbox" checked><br>
			{% else %}
			<input id="can_reverse" name="can_reverse" type="checkbox"><br>
			{% endif %}
			<label for="step_size" class="form-label">Step size:</label>
			<input id="step_size" name="step_size" type="text" value="{{ config.step_size }}"><br>
			<label for="steps_per_sec" class="form-label">Steps per second:</label>
			<input id="steps_per_sec" name="steps_per_sec" type="text" value="{{ config.steps_per_sec }}"><br>
		</div>


		<div class="card-body border">
			<h5 class="card-title">Logging</h5>
			<label for="log_level" class="form-label">Log Level:</label>
			<select id="log_level" name="log_level">
				{% if config.log_level == 10 %}
				<option value="DEBUG" selected>DEBUG</option>
				{% else %}
				<option value="DEBUG">DEBUG</option>
				{% endif %}

				{% if config.log_level == 20 %}
				<option value="INFO" selected>INFO</option>
				{% else %}
				<option value="INFO">INFO</option>
				{% endif %}

				{% if config.log_level == 30 %}
				<option value="WARN" selected>WARN</option>
				{% else %}
				<option value="WARN">WARN</option>
				{% endif %}

				{% if config.log_level == 40 %}
				<option value="ERROR" selected>ERROR</option>
				{% else %}
				<option value="ERROR">ERROR</option>
				{% endif %}

			</select>
			<br>
			<label for="log_prefix" class="form-label">Log Prefix:</label>
			<input id="log_prefix" name="log_prefix" type="text" value="{{ config.prefix }}">

			<br>
			<label for="log_to_stdout" class="form-label">Log to stdout:</label>
			{% if config.log_to_stdout == true %}
			<input id="log_to_stdout" name="log_to_stdout" type="checkbox" checked>
			{% else %}
			<input id="log_to_stdout" name="log_to_stdout" type="checkbox">
			{% endif %}

			<br>
			<label for="max_size_mb" class="form-label">Max log size in MB</label>
			<input id="max_size_mb" name="max_size_mb" type="text" value="{{ config.max_size_mb }}">

			<br>
			<label for="num_keep_logs" class="form-label">Number of logs to keep</label>
			<input id="num_keep_logs" name="num_keep_logs" type="text" value="{{ config.num_keep_logs }}">

			<br>
			<label for="log_events_in_info" class="form-label">Log events in info:</label>
			{% if config.log_events_in_info == true %}
			<input id="log_events_in_info" name="log_events_in_info" type="checkbox" checked>
			{% else %}
			<input id="log_events_in_info" name="log_events_in_info" type="checkbox">
			{% endif %}

			<br>
		</div>

		<div class="card-body border">
			<h5 class="card-title">Seestar Initialization</h5>
			<label for="init_save_good_frames" class="form-label">Save good frames:</label>
			{% if config.init_save_good_frames == true %}
			<input id="init_save_good_frames" name="init_save_good_frames" type="checkbox" checked><br>
			{% else %}
			<input id="init_save_good_frames" name="init_save_good_frames" type="checkbox"><br>
			{% endif %}
			<label for="init_save_all_frames" class="form-label">Save all frames:</label>
			{% if config.save_all_frames == true %}
			<input id="init_save_all_frames" name="init_save_all_frames" type="checkbox" checked><br>
			{% else %}
			<input id="init_save_all_frames" name="init_save_all_frames" type="checkbox"><br>
			{% endif %}
			<label for="init_lat" class="form-label">Latitude:</label>
			<input id="init_lat" name="init_lat" type="text" value="{{ config.init_lat }}"><br>
			<label for="init_long" class="form-label">Longitude:</label>
			<input id="init_long" name="init_long" type="text" value="{{ config.init_long }}"><br>
			<label for="init_gain" class="form-label">Gain:</label>
			<input id="init_gain" name="init_gain" type="text" value="{{ config.init_gain }}"><br>
			<label for="init_expo_preview_ms" class="form-label">Exposure preview ms:</label>
			<input id="init_expo_preview_ms" name="init_expo_preview_ms" type="text" value="{{ config.init_expo_preview_ms }}"><br>
			<label for="init_expo_stack_ms" class="form-label">Exposure stack ms:</label>
			<input id="init_expo_stack_ms" name="init_expo_stack_ms" type="text" value="{{ config.init_expo_stack_ms }}"><br>
			<label for="init_dither_enabled" class="form-label">Dither enabled:</label>
			{% if config.init_dither_enabled == true %}
			<input id="init_dither_enabled" name="init_dither_enabled" type="checkbox" checked><br>
			{% else %}
			<input id="init_dither_enabled" name="init_dither_enabled" type="checkbox"><br>
			{% endif %}
			<label for="init_dither_length_pixel" class="form-label">Dither length pixels:</label>
			<input id="init_dither_length_pixel" name="init_dither_length_pixel" type="text" value="{{ config.init_dither_length_pixel }}"><br>
			<label for="init_dither_frequency" class="form-label">Dither frequency:</label>
			<input id="init_dither_frequency" name="init_dither_frequency" type="text" value="{{ config.init_dither_frequency }}"><br>
			<label for="init_activate_LP_filter" class="form-label">Activate LP filter:</label>
			{% if config.init_activate_LP_filter == true %}
			<input id="init_activate_LP_filter" name="init_activate_LP_filter" type="checkbox" checked><br>
			{% else %}
			<input id="init_activate_LP_filter" name="init_activate_LP_filter" type="checkbox"><br>
			{% endif %}
			<label for="init_dew_heater_power" class="form-label">Dew heater power:</label>
			<input id="init_dew_heater_power" name="init_dew_heater_power" type="text" value="{{ config.init_dew_heater_power }}"><br>
			<label for="scope_aim_lat" class="form-label">Scope aim latitude:</label>
			<input id="scope_aim_lat" name="scope_aim_lat" type="text" value="{{ config.scope_aim_lat }}"><br>
			<label for="scope_aim_lon" class="form-label">Scope aim longitde:</label>
			<input id="scope_aim_lon" name="scope_aim_lon" type="text" value="{{ config.scope_aim_lon }}"><br>
		</div>

		<div class="card-body border">
			<button type="submit" class="btn btn-primary">Save</button>
		</div>
		</form>
	</div>

	<footer class="bg-body-tertiary text-center mt-3">
		Version: {{ version }}
	</footer>
{% endblock %}
